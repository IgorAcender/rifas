{% extends 'base.html' %}

{% block title %}{{ raffle.name }} - Detalhes | Sistema de Rifas{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-header-left">
        <a href="{% url 'dashboard' %}" class="btn-back">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"></path>
            </svg>
            Voltar
        </a>
        <div>
            <h1>{{ raffle.name }}</h1>
            <p class="campaign-subtitle">
                <span class="campaign-status status-{{ raffle.status }}">
                    {{ raffle.get_status_display }}
                </span>
                <span class="separator">‚Ä¢</span>
                <span>Criada em {{ raffle.created_at|date:"d/m/Y" }}</span>
            </p>
        </div>
    </div>
</div>

<!-- Estat√≠sticas da Campanha -->
<div class="campaign-overview">
    <div class="overview-card">
        <h3 class="overview-title">Resumo Geral</h3>
        <div class="overview-stats">
            <div class="overview-stat">
                <p class="overview-label">N√∫meros Vendidos</p>
                <p class="overview-value">{{ numbers_sold }} / {{ raffle.total_numbers }}</p>
                <div class="progress-bar-large">
                    <div class="progress-fill" style="width: {{ percentage_sold }}%"></div>
                </div>
                <p class="overview-detail">{{ percentage_sold }}% vendidos</p>
            </div>
        </div>
    </div>

    <div class="stats-mini-grid">
        <div class="mini-stat-card">
            <p class="mini-stat-label">Dispon√≠veis</p>
            <p class="mini-stat-value" style="color: #22c55e;">{{ numbers_available }}</p>
            <p class="mini-stat-detail">R$ {{ available_value|floatformat:2 }}</p>
        </div>
        <div class="mini-stat-card">
            <p class="mini-stat-label">Reservados</p>
            <p class="mini-stat-value" style="color: #f59e0b;">{{ numbers_reserved }}</p>
        </div>
        <div class="mini-stat-card">
            <p class="mini-stat-label">Compradores</p>
            <p class="mini-stat-value" style="color: #3b82f6;">{{ total_buyers }}</p>
        </div>
        <div class="mini-stat-card">
            <p class="mini-stat-label">Indica√ß√µes</p>
            <p class="mini-stat-value" style="color: #8b5cf6;">{{ total_referrals }}</p>
        </div>
    </div>

    <div class="revenue-grid">
        <div class="revenue-card">
            <p class="revenue-label">Receita Total</p>
            <p class="revenue-value">R$ {{ total_revenue|floatformat:2 }}</p>
        </div>
        <div class="revenue-card">
            <p class="revenue-label">Taxa ({{ raffle.fee_percentage }}%)</p>
            <p class="revenue-value" style="color: #ef4444;">- R$ {{ fee_amount|floatformat:2 }}</p>
        </div>
        <div class="revenue-card highlight">
            <p class="revenue-label">Receita L√≠quida</p>
            <p class="revenue-value">R$ {{ net_revenue|floatformat:2 }}</p>
        </div>
    </div>
</div>

<!-- Top Indicadores -->
{% if top_inviters %}
<div class="top-inviters-section">
    <h2 class="section-title">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"></path>
        </svg>
        Top 5 Indicadores
    </h2>
    <div class="top-inviters-grid">
        {% for inviter in top_inviters %}
        <div class="inviter-card">
            <div class="inviter-rank">{{ forloop.counter }}</div>
            <div class="inviter-info">
                <h4 class="inviter-name">{{ inviter.user.name }}</h4>
                <p class="inviter-whatsapp">{{ inviter.user.whatsapp }}</p>
            </div>
            <div class="inviter-stats">
                <div class="inviter-stat">
                    <p class="inviter-stat-value">{{ inviter.referral_count }}</p>
                    <p class="inviter-stat-label">Indica√ß√µes</p>
                </div>
                <div class="inviter-stat">
                    <p class="inviter-stat-value">+{{ inviter.bonus_numbers }}</p>
                    <p class="inviter-stat-label">N√∫meros B√¥nus</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- N√∫meros Premiados -->
{% if prize_winners %}
<div class="prize-winners-section">
    <h2 class="section-title">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="8" r="7"></circle>
            <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
        </svg>
        üèÜ N√∫meros Premiados
    </h2>
    <div class="prize-winners-grid">
        {% for prize in prize_winners %}
        <div class="prize-card {% if prize.is_won %}prize-won{% elif prize.is_released %}prize-released{% else %}prize-locked{% endif %}">
            <div class="prize-header">
                <div class="prize-number-badge">{{ prize.number|stringformat:"04d" }}</div>
                <div class="prize-amount">R$ {{ prize.prize_amount|floatformat:2 }}</div>
            </div>
            
            {% if prize.is_won %}
                <div class="prize-status status-won">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    Pr√™mio Ganho
                </div>
                <div class="prize-winner-info">
                    <p class="winner-label">Ganhador:</p>
                    <p class="winner-name">{{ prize.winner.name }}</p>
                    <p class="winner-phone">{{ prize.winner.whatsapp }}</p>
                    <p class="winner-date">{{ prize.won_at|date:"d/m/Y √†s H:i" }}</p>
                </div>
            {% elif prize.is_released %}
                <div class="prize-status status-released">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                    Liberado para Sorteio
                </div>
                <p class="prize-threshold">Liberado entre {{ prize.release_percentage_min }}% e {{ prize.release_percentage_max }}% de vendas</p>
            {% else %}
                <div class="prize-status status-locked">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 9.9-1"></path>
                    </svg>
                    Bloqueado
                </div>
                <p class="prize-threshold">Ser√° liberado entre {{ prize.release_percentage_min }}% e {{ prize.release_percentage_max }}% de vendas</p>
                <p class="prize-current">Atual: {{ percentage_sold }}%</p>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- Lista de Compradores -->
<div class="buyers-section">
    <div class="buyers-header">
        <h2 class="section-title">
            Compradores ({{ total_buyers }})
        </h2>
        <div class="filter-buttons">
            <a href="?filter=total_amount" class="filter-btn {% if current_filter == 'total_amount' %}active{% endif %}">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                </svg>
                Maiores Compradores
            </a>
            <a href="?filter=total_quantity" class="filter-btn {% if current_filter == 'total_quantity' %}active{% endif %}">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7"></rect>
                    <rect x="14" y="3" width="7" height="7"></rect>
                    <rect x="14" y="14" width="7" height="7"></rect>
                    <rect x="3" y="14" width="7" height="7"></rect>
                </svg>
                Mais N√∫meros
            </a>
            <a href="?filter=successful_referrals" class="filter-btn {% if current_filter == 'successful_referrals' %}active{% endif %}">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                Maiores Indicadores
            </a>
            <a href="?filter=referral_bonus" class="filter-btn {% if current_filter == 'referral_bonus' %}active{% endif %}">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 12v10H4V12"></path>
                    <path d="M22 7H2v5h20V7z"></path>
                    <path d="M12 22V7"></path>
                    <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path>
                    <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>
                </svg>
                Mais B√¥nus
            </a>
            <a href="?filter=name" class="filter-btn {% if current_filter == 'name' %}active{% endif %}">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="21" y1="10" x2="3" y2="10"></line>
                    <line x1="21" y1="6" x2="3" y2="6"></line>
                    <line x1="21" y1="14" x2="3" y2="14"></line>
                    <line x1="21" y1="18" x2="3" y2="18"></line>
                </svg>
                A-Z
            </a>
        </div>
    </div>

    {% if buyers_list %}
        <div class="buyers-table">
            {% for buyer in buyers_list %}
            <div class="buyer-card">
                <div class="buyer-header">
                    <div class="buyer-info">
                        <div class="buyer-avatar">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </div>
                        <div class="buyer-details">
                            <h4 class="buyer-name">{{ buyer.user.name }}</h4>
                            <div class="buyer-contact">
                                <span class="contact-item">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
                                    </svg>
                                    {{ buyer.user.whatsapp }}
                                </span>
                                {% if buyer.user.email %}
                                <span class="contact-item">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                        <polyline points="22,6 12,13 2,6"></polyline>
                                    </svg>
                                    {{ buyer.user.email }}
                                </span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="buyer-summary">
                        <div class="summary-item">
                            <p class="summary-label">Total Investido</p>
                            <p class="summary-value highlight">R$ {{ buyer.total_amount|floatformat:2 }}</p>
                        </div>
                        <div class="summary-item">
                            <p class="summary-label">N√∫meros Comprados</p>
                            <p class="summary-value">{{ buyer.total_quantity }}</p>
                        </div>
                        <div class="summary-item">
                            <p class="summary-label">Pessoas Indicadas</p>
                            <p class="summary-value referral">{{ buyer.successful_referrals }}</p>
                        </div>
                        <div class="summary-item">
                            <p class="summary-label">B√¥nus Indica√ß√£o</p>
                            <p class="summary-value bonus">+{{ buyer.referral_bonus_count }}</p>
                        </div>
                        <div class="summary-item">
                            <p class="summary-label">Total de N√∫meros</p>
                            <p class="summary-value total">{{ buyer.total_quantity|add:buyer.referral_bonus_count }}</p>
                        </div>
                    </div>
                </div>

                <div class="buyer-numbers">
                    {% if buyer.purchased_numbers %}
                    <div class="numbers-section">
                        <p class="numbers-title">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                            N√∫meros Comprados ({{ buyer.purchased_numbers|length }})
                        </p>
                        <div class="numbers-list">
                            {% for number in buyer.purchased_numbers %}
                                <span class="number-badge purchased">{{ number|stringformat:"04d" }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}

                    {% if buyer.bonus_numbers %}
                    <div class="numbers-section">
                        <p class="numbers-title">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2">
                                <path d="M20 12v10H4V12"></path>
                                <path d="M22 7H2v5h20V7z"></path>
                                <path d="M12 22V7"></path>
                                <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path>
                                <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>
                            </svg>
                            N√∫meros Ganhos por Indica√ß√£o ({{ buyer.bonus_numbers|length }})
                        </p>
                        <div class="numbers-list">
                            {% for number in buyer.bonus_numbers %}
                                <span class="number-badge bonus">{{ number|stringformat:"04d" }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
            <p>Nenhum comprador ainda</p>
        </div>
    {% endif %}
</div>

<style>
/* Page Header */
.page-header {
    margin-bottom: 32px;
}

.page-header-left {
    display: flex;
    align-items: flex-start;
    gap: 16px;
}

.btn-back {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    color: #64748b;
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.2s;
}

.btn-back:hover {
    background: #f8fafc;
    color: #335268;
}

.page-header h1 {
    font-size: 28px;
    font-weight: 700;
    color: #1e293b;
    margin: 0 0 8px 0;
}

.campaign-subtitle {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: #64748b;
    margin: 0;
}

.separator {
    color: #cbd5e1;
}

.campaign-status {
    padding: 4px 12px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
}

.status-active {
    background: #dcfce7;
    color: #16a34a;
}

.status-draft {
    background: #f3f4f6;
    color: #6b7280;
}

.status-finished {
    background: #dbeafe;
    color: #2563eb;
}

/* Campaign Overview */
.campaign-overview {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 20px;
    margin-bottom: 40px;
}

.overview-card {
    grid-column: 1 / -1;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 24px;
}

.overview-title {
    font-size: 18px;
    font-weight: 600;
    color: #1e293b;
    margin: 0 0 20px 0;
}

.overview-stat {
    max-width: 600px;
}

.overview-label {
    font-size: 14px;
    color: #64748b;
    margin: 0 0 8px 0;
}

.overview-value {
    font-size: 32px;
    font-weight: 700;
    color: #1e293b;
    margin: 0 0 12px 0;
}

.progress-bar-large {
    width: 100%;
    height: 12px;
    background: #e2e8f0;
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 8px;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #22c55e, #16a34a);
    transition: width 0.3s ease;
}

.overview-detail {
    font-size: 13px;
    color: #94a3b8;
    margin: 0;
}

.stats-mini-grid {
    grid-column: 1 / -1;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
}

.mini-stat-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 20px;
    text-align: center;
}

.mini-stat-label {
    font-size: 13px;
    color: #64748b;
    margin: 0 0 8px 0;
}

.mini-stat-value {
    font-size: 28px;
    font-weight: 700;
    margin: 0;
}

.mini-stat-detail {
    font-size: 13px;
    color: #94a3b8;
    margin: 4px 0 0 0;
}

.revenue-grid {
    grid-column: 1 / -1;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}

.revenue-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 20px;
}

.revenue-card.highlight {
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    border-color: #fbbf24;
}

.revenue-label {
    font-size: 13px;
    color: #64748b;
    margin: 0 0 8px 0;
}

.revenue-value {
    font-size: 24px;
    font-weight: 700;
    color: #1e293b;
    margin: 0;
}

/* Top Inviters Section */
.top-inviters-section {
    margin-top: 40px;
}

/* Prize Winners Section */
.prize-winners-section {
    margin-top: 40px;
}

.prize-winners-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.prize-card {
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    border-left: 4px solid transparent;
}

.prize-card.prize-won {
    border-left-color: #22c55e;
    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
}

.prize-card.prize-released {
    border-left-color: #f59e0b;
    background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
}

.prize-card.prize-locked {
    border-left-color: #94a3b8;
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
}

.prize-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}

.prize-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.prize-number-badge {
    font-size: 28px;
    font-weight: 700;
    color: #1e293b;
    font-family: 'Courier New', monospace;
}

.prize-amount {
    font-size: 20px;
    font-weight: 600;
    color: #059669;
}

.prize-status {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 500;
    margin-bottom: 12px;
}

.prize-status.status-won {
    background: #22c55e;
    color: white;
}

.prize-status.status-released {
    background: #f59e0b;
    color: white;
}

.prize-status.status-locked {
    background: #94a3b8;
    color: white;
}

.prize-winner-info {
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.winner-label {
    font-size: 11px;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin: 0 0 6px 0;
}

.winner-name {
    font-size: 15px;
    font-weight: 600;
    color: #1e293b;
    margin: 0 0 4px 0;
}

.winner-phone {
    font-size: 13px;
    color: #64748b;
    margin: 0 0 8px 0;
    font-family: 'Courier New', monospace;
}

.winner-date {
    font-size: 12px;
    color: #94a3b8;
    margin: 0;
}

.prize-threshold {
    font-size: 13px;
    color: #64748b;
    margin: 8px 0 0 0;
}

.prize-current {
    font-size: 12px;
    color: #94a3b8;
    margin: 4px 0 0 0;
}

/* Top Inviters Section */
.top-inviters-section {
    margin-top: 40px;
    margin-bottom: 40px;
}

.top-inviters-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 16px;
    max-width: 100%;
}

.inviter-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 16px;
    position: relative;
    overflow: hidden;
    min-width: 0;
}

.inviter-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, #fbbf24, #f59e0b);
}

.inviter-rank {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, #fef3c7, #fde68a);
    border: 2px solid #fbbf24;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: 700;
    color: #b45309;
    flex-shrink: 0;
}

.inviter-info {
    flex: 1;
    min-width: 0;
}

.inviter-name {
    font-size: 15px;
    font-weight: 600;
    color: #1e293b;
    margin: 0 0 4px 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.inviter-whatsapp {
    font-size: 13px;
    color: #64748b;
    margin: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.inviter-stats {
    display: flex;
    gap: 16px;
}

.inviter-stat {
    text-align: center;
}

.inviter-stat-value {
    font-size: 20px;
    font-weight: 700;
    color: #8b5cf6;
    margin: 0 0 4px 0;
}

.inviter-stat-label {
    font-size: 11px;
    color: #94a3b8;
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Buyers Section */
.buyers-section {
    margin-top: 40px;
}

.buyers-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    gap: 20px;
    flex-wrap: wrap;
}

.section-title {
    font-size: 20px;
    font-weight: 600;
    color: #1e293b;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 12px;
}

.filter-buttons {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.filter-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    color: #64748b;
    text-decoration: none;
    font-size: 13px;
    font-weight: 500;
    transition: all 0.2s;
    cursor: pointer;
}

.filter-btn:hover {
    background: #f8fafc;
    border-color: #cbd5e1;
    color: #335268;
}

.filter-btn.active {
    background: #335268;
    border-color: #335268;
    color: white;
}

.filter-btn.active svg {
    stroke: white;
}

.title-detail {
    font-size: 14px;
    font-weight: 400;
    color: #94a3b8;
}

.buyers-table {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.buyer-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    overflow: hidden;
}

.buyer-header {
    padding: 24px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 24px;
    border-bottom: 1px solid #f1f5f9;
}

.buyer-info {
    display: flex;
    gap: 16px;
    align-items: flex-start;
}

.buyer-avatar {
    width: 48px;
    height: 48px;
    background: #f1f5f9;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #64748b;
    flex-shrink: 0;
}

.buyer-details {
    flex: 1;
}

.buyer-name {
    font-size: 16px;
    font-weight: 600;
    color: #1e293b;
    margin: 0 0 8px 0;
}

.buyer-contact {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.contact-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    color: #64748b;
}

.buyer-summary {
    display: flex;
    gap: 24px;
}

.summary-item {
    text-align: right;
}

.summary-label {
    font-size: 12px;
    color: #94a3b8;
    margin: 0 0 4px 0;
}

.summary-value {
    font-size: 20px;
    font-weight: 700;
    color: #1e293b;
    margin: 0;
}

.summary-value.highlight {
    color: #f59e0b;
}

.summary-value.referral {
    color: #10b981;
}

.summary-value.bonus {
    color: #8b5cf6;
}

.summary-value.total {
    color: #3b82f6;
}

.buyer-numbers {
    padding: 24px;
    background: #f8fafc;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.numbers-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.numbers-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 600;
    color: #475569;
    margin: 0;
}

.numbers-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.number-badge {
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 600;
    font-family: 'Courier New', monospace;
}

.number-badge.purchased {
    background: #dcfce7;
    color: #16a34a;
    border: 1px solid #bbf7d0;
}

.number-badge.bonus {
    background: #f3e8ff;
    color: #7c3aed;
    border: 1px solid #e9d5ff;
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: 60px 20px;
    background: white;
    border: 2px dashed #e5e7eb;
    border-radius: 12px;
}

.empty-state svg {
    color: #cbd5e1;
    margin-bottom: 16px;
}

.empty-state p {
    font-size: 16px;
    color: #64748b;
    margin: 0;
}
</style>
{% endblock %}
